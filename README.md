# Trunk Recorder Dashboard

> **⚠️ WARNING**: This documentation was generated by an AI that is really fucking stupid. The information provided may be inaccurate, incomplete, or just plain wrong. Proceed with extreme caution and verify everything yourself.

> **⚠️ Project Disclaimer**: This is a proof of concept project and is not intended for production use. The current implementation may have limitations in scalability, reliability, and usability. Use at your own risk and expect potential issues with performance, error handling, and data consistency.

## Overview
A real-time radio monitoring dashboard that visualizes radio activity across different talkgroups. The application connects to a trunk_recorder MongoDB database to track radio events and displays them with contextual information from a RadioReference.com talkgroup metadata file. Features color-coded event tracking, activity statistics, visual feedback for recent events, filtering capabilities, and multiple sorting options.

## Features

### Real-time Event Monitoring
- Live updates of radio activities across talkgroups
- Color-coded event types:
  - Call (Blue with glow)
  - Join (Green)
  - Location (Cyan)
  - Data (Purple)
  - Answer Request (Orange)
  - Acknowledgment Response (Teal)
  - On (Yellow)
  - Default (Gray)

### Talkgroup History View
- Click on any talkgroup card to view detailed history
- Adaptive data loading:
  - Shows either the most recent 200 events OR
  - Events from the last 24 hours (whichever is less)
- Displays list of all radios that have been affiliated
- Chronological event list with:
  - Event type with color coding
  - Radio ID
  - Timestamp
- Modal interface with multiple close options
- Optimized for both busy and quiet talkgroups

### Visual Feedback
- Activity glow effects on talkgroup cards (30-second fade)
- Color-matched glow based on event type
- Hover tooltips showing radio details
- Timestamp display for latest activity

### Statistics & Metrics
- Total call count per talkgroup
- Call frequency calculation (calls per minute)
- 5-minute rolling window for frequency calculation
- Last activity timestamp

### Filtering, Sorting & Organization
- County-based filtering with quick selection buttons:
  - All (shows all counties)
  - Hamilton County (hamco)
  - Warren County (warco)
  - Butler County (butco)
  - Montgomery County (monco)
- Toggle between all talkgroups and active-only view
- Active filter shows only talkgroups with call history
- Multiple sorting options:
  - ID (default): Sort by talkgroup number
  - Calls: Sort by total number of calls
  - Frequency: Sort by calls per minute
  - Recent: Sort by most recent activity
- Compact, information-dense card layout
- Grouped radio indicators per talkgroup

### Historical Data Loading
- Multiple time range options:
  - Last 30 minutes
  - Last 2 hours
  - Last 6 hours
  - Last 12 hours
- Progress indicator with event count
- Automatic data processing in chunks
- Real-time loading feedback

### Metadata Integration
- Talkgroup names and descriptions
- Category and tag information
- County/department identification

## API Endpoints

### GET /api/talkgroups
Returns JSON object mapping talkgroup IDs to their metadata:
```javascript
{
  "9000": {
    "hex": "2328",
    "alphaTag": "09 HELP",
    "mode": "D",
    "description": "Emergency Calling to COM PSAPs",
    "tag": "Emergency Ops",
    "category": "Butler County (09) Common"
  },
  // ... additional talkgroups
}
```

### GET /api/talkgroup/:id/history
Returns detailed history for a specific talkgroup:
```javascript
{
  "talkgroupId": "9000",
  "totalEvents": 157,
  "uniqueRadios": ["1234", "5678", "9012"],
  "events": [
    {
      "eventType": "call",
      "radioID": "1234",
      "timestamp": "2024-01-20T15:30:00Z",
      "talkgroupInfo": {
        "alphaTag": "09 HELP",
        "description": "Emergency Calling to COM PSAPs",
        // ... additional metadata
      }
    },
    // ... additional events
  ]
}
```
Returns either the most recent 200 events or events from the last 24 hours, whichever results in fewer records.

## Installation & Setup

1. Clone the repository:
```bash
git clone https://github.com/LumenPrima/trunk-recorder-dashboard.git
cd trunk-recorder-dashboard
```

2. Install dependencies:
```bash
npm install
```

3. Configure environment variables:
   - Copy `.env.example` to `.env`
   - Update the `.env` file with your MongoDB connection details and desired port

4. Start the server:
```bash
npm start
```

5. Access the application at http://localhost:3000 (or your configured port)

## Development

To run the server in development mode:
```bash
npm run dev
```

## Project Structure

```
trunk-recorder-dashboard/
├── docs/
│   └── images/          # Screenshots and images
├── public/
│   ├── index.html      # Main HTML file
│   ├── js/            # Frontend JavaScript modules
│   │   ├── app.js
│   │   ├── talkgroup-manager.js
│   │   └── ui-manager.js
│   └── styles/        # CSS styles
│       └── main.css
├── .env.example       # Environment variables template
├── .gitignore        # Git ignore rules
├── README.md         # Project documentation
├── analyze-history.js # Event analysis utility
├── capture.js        # Event capture utility
├── config.json       # Trunk-recorder configuration
├── log_mongo.sh      # Event logging script
├── package.json      # Project metadata and dependencies
├── server.js         # Express server implementation
└── trs_tg_6643.csv   # RadioReference talkgroup data
```

## Dependencies

```json
{
  "chalk": "^5.4.1",
  "dotenv": "^16.3.1",
  "express": "^4.21.2",
  "mongodb": "^6.12.0",
  "socket.io": "^4.8.1",
  "socket.io-client": "^4.8.1"
}
```

## Future Enhancement Areas

1. Data Persistence & History
- Event logging
- Timeline view
- Historical replay
- Usage pattern analytics

2. UI/UX Improvements
- Dark mode theme
- Mobile responsiveness
- Advanced sorting/filtering
- Search functionality

3. Monitoring & Analytics
- Activity metrics dashboard
- Call duration statistics
- Usage reports
- Heat maps

4. Additional Features
- User authentication
- Custom talkgroup labels
- Favorites system
- Export functionality
- Geolocation tracking

5. Performance & Security
- Rate limiting
- Connection pooling
- Error handling
- Data validation
- SSL/TLS encryption
- Request logging
